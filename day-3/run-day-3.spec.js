const runDay3 = require('./run-day-3');

const singleIdTest = [
    '467$.......' // 467
];

const twoIdTest = [
    '$467..114/.', // 467 + 114
];
const oneOfTwoValidIds = [
    '617*.233..', // 617
];

const validIdInPrecedingLine = [
    '467..114..',
    '...*......', // 467
]

const validIdInSubsequentLine = [
    '...$......',
    '.664.598..', // 598
]

const validIdAtEndOfRow = [
    '$58...%789',
    '..64.598..', // 58 + 789 + 598
]

const validateNoUsableNumbers = [
    '..456......',
    '......987..',
    '890...734..',
    '23.45..67..',
    '.....1.37..',
    '..63634....',
]

const testSchematic = [
    '467..114..',
    '...*......',
    '..35..633.',
    '......#...',
    '617*......',
    '.....+.58.',
    '..592.....',
    '......755.',
    '...$.*....',
    '.664.598..'
]; // 114, 58 should not be included

const largeTestSchematic = [
    '...........................775.651...............887....79...946...921...493.....942..942.....151....155....................................',
    '......240...................*.....-......................$..*...................*.......%.....+....................956.549.*290.......834...',
    '.485...+............437......906......%..608.805.725..72.....242....745..61......440................................*..*.........515...*....',
    '..........917.......&....146........790.....*......*....*..........*.....*...............207*......................796..116......../...924..',
    '722...323.-................./...410.............72..748.442............384.708...............849..%............................470..........',
    '.....*..........................*.....271..691....-...............4*...........388.................448......&........*....848&......751.....',
    '....370..$....639.748.......*...467....*.....*........921*909.....................*...32.....................165..452.30....................',
    '........984....*.....*...782........711.....50.172...............61&..........415.803.*.........524.......................203.......106*643.',
    '...............57..433.........390....................&../.............*122...........674.........*.........................................',
    '379..................../.........*........908..477...305.876..*..............297.415*......+.......94........../.....@378.......226..56*....',
    '...*..-......82.......167...936.17..958...=....*...............196......+......*.......-...380.992.............989.........29......*....301.'
]

const testSchematicSum = 4361;

test('returns single id', () => {
    const expectedSum = 467;
    const result = runDay3(singleIdTest);
    expect(result).toBe(expectedSum);
});


test('returns two ids', () => {
    const expectedSum = 467 + 114;
    const result = runDay3(twoIdTest);
    expect(result).toBe(expectedSum);
});

test('returns zero', () => {
    const expectedSum = 0;
    const result = runDay3(validateNoUsableNumbers);
    expect(result).toBe(expectedSum);
});

test('returns valid number at the end of the row', () => {
    const expectedSum = 58 + 789 + 598;
    const result = runDay3(validIdAtEndOfRow);
    expect(result).toBe(expectedSum);
});

test('returns expected sum', () => {
    const testSchematicResult = runDay3(testSchematic);
    expect(testSchematicResult).toBe(testSchematicSum);
});
